(this["webpackJsonpelasticsearch-taskview"]=this["webpackJsonpelasticsearch-taskview"]||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(3),c=n.n(r),u=(n(9),n(10),n(1)),o=function(e,t){return e.length>t?"".concat(e.substring(0,t),"..."):e},i=function(e){var t=e.task.task;if(!t)return"[no task details]";var n=t.status,a=n?n.updated+n.created+n.deleted:null,r=n.total-a,c=t.running_time_in_nanos/a/1e6,u=a/t.running_time_in_nanos*1e9;return n?l.a.createElement("div",null,l.a.createElement("progress",{value:a,max:n.total,style:{width:"500px"}}),l.a.createElement("br",null),"Velocity: ",u.toFixed(1)," docs/s",l.a.createElement("br",null),"Updated: ",n.updated," Created: ",n.created," Deleted: ",n.deleted," Total: ",n.total,l.a.createElement("br",null),"Remaining: ",r," ETA: ",new Date(c*r).toISOString().substr(11,8),l.a.createElement("br",null),"Description: ",l.a.createElement("code",{title:t.description},o(t.description,80))):null},s=function(e){var t=e.task,n=(e.clusterUrl,e.doAutoRefresh),r=e.clusterUrl+"/_tasks/"+t.node+":"+t.id,c=Object(a.useState)(),o=Object(u.a)(c,2),s=o[0],m=o[1],d=function(){fetch(r).then((function(e){return e.json()})).then((function(e){m(e)}))};Object(a.useEffect)((function(){console.log("looking at task "+JSON.stringify(t)),function(e){return!1===e.action.startsWith("cluster:monitor")}(t)&&(console.log("it was interesting"),d())}),[]);return Object(a.useEffect)((function(){return function e(){n&&(d(),setTimeout((function(){return e()}),1e4))}()}),[n]),l.a.createElement("div",null,l.a.createElement("table",{border:"1",style:{display:"inline-table"}},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"id"),l.a.createElement("th",null,"action"),l.a.createElement("th",null,"type"),l.a.createElement("th",null,"started"),l.a.createElement("th",null,"running time"),l.a.createElement("th",null,"cancellable"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,t.id),l.a.createElement("td",null,t.action),l.a.createElement("td",null,t.type),l.a.createElement("td",null,new Date(t.start_time_in_millis).toLocaleTimeString()),l.a.createElement("td",null,new Date(t.running_time_in_nanos/1e6).toISOString().substr(11,8)),l.a.createElement("td",null,t.cancellable.toString())))),l.a.createElement("br",null),s?l.a.createElement(i,{task:s}):null)},m=function(e){var t=e.node,n=e.clusterUrl,a=e.doAutoRefresh,r=t.tasks?Object.keys(t.tasks).sort().map((function(e){return t.tasks[e]})).filter((function(e){return-1!==e.action.indexOf("reindex")})).map((function(e){return l.a.createElement(s,{key:e.id,task:e,clusterUrl:n,doAutoRefresh:a})})):null;return l.a.createElement("div",null,l.a.createElement("h3",null,t.name),"clusterUrl: ",n,"auto: ",a?"on":"off",l.a.createElement("ul",null,l.a.createElement("li",null,"ip: ",t.ip),l.a.createElement("li",null,"roles: ",JSON.stringify(t.roles))),"Tasks:",r)},d=function(){var e=Object(a.useState)("http://localhost:9200"),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(u.a)(c,2),s=i[0],d=i[1],f=Object(a.useState)(!0),E=Object(u.a)(f,2),h=E[0],b=E[1],g=function(){var e=n+"/_tasks";console.log(e),fetch(e).then((function(e){return e.json()})).then((function(e){d(e)}))};Object(a.useEffect)((function(){g()}),[]),Object(a.useEffect)((function(){h&&function e(){h&&(g(),setTimeout((function(){return e()}),1e4))}()}),[h]);var k=s?Object.keys(s.nodes).map((function(e){return l.a.createElement(m,{node:s.nodes[e],key:e,clusterUrl:n,doAutoRefresh:h})})):null;return l.a.createElement("div",null,l.a.createElement("h1",null,"Elasticsearch cluster @ ",n),l.a.createElement("span",null,"Cluster URL: ",l.a.createElement("input",{value:n,onChange:function(e){return r(e.target.value)}})),l.a.createElement("button",{onClick:g},"\u21bb Refresh"),l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:h,onChange:function(e){return b(e.target.checked)}}),"Auto-refresh"),s?l.a.createElement("pre",{title:s},"Status: ",o(JSON.stringify(s),100)):null,k)};var f=function(){return l.a.createElement(d,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[4,1,2]]]);
//# sourceMappingURL=main.8839ae1c.chunk.js.map